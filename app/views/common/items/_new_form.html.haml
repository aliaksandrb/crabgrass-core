- # Expects the following locals:
- #   item - a new active record element of the item to create
- #   url  - a url to submit the form to
- # You can also yield additional form elements.
- # for an example see
- #   /extensions/pages/task_list_page/app/views/tasks/_new.html.haml
:ruby
  type = dom_class(item) if type.blank?
  label = I18n.t("actions.#{type}.add")

.accordion-group[item]
  .accordion-heading[item, :link]
    = link_to_function label, toggle(item, :form), class: 'accordion-toggle'
  .accordion-inner[item, :form]{style: 'display: none'}
    = form_for item, url: url, remote: true, html: {data: {clear: true}} do |f|
      %p= f.text_field 'name',
        class: "#{type}_name",
        placeholder: :description.t
      %p= f.text_area  'description',
        rows: '4',
        class: "#{type}_description",
        placeholder: :details.t
      = yield if block_given?
      %p
        %button.btn.btn-primary{data: {"disable-with" => label}}
          = label
      = spinner

